<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Progress Report System</title>
    <style>
        /* General Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        h1, h2, h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Header and Navigation */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }

        /* Form Styles */
        .form-container {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }

        .form-group {
            flex: 1 0 200px;
            margin: 0 10px 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            max-width: 400px;
            margin-right: 15px;
        }

        .sort-options {
            display: flex;
            gap: 10px;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
            font-weight: 600;
            cursor: pointer;
        }

        th:hover {
            background-color: #e6e6e6;
        }

        tbody tr:hover {
            background-color: #f9f9f9;
        }

        .action-btn {
            padding: 6px 10px;
            margin-right: 5px;
            font-size: 14px;
        }

        .edit-btn {
            background-color: #f39c12;
        }

        .edit-btn:hover {
            background-color: #e67e22;
        }

        .delete-btn {
            background-color: #e74c3c;
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        /* Grade Colors */
        .grade-A {
            color: #27ae60;
            font-weight: bold;
        }

        .grade-B {
            color: #2980b9;
            font-weight: bold;
        }

        .grade-C {
            color: #f39c12;
            font-weight: bold;
        }

        .grade-D {
            color: #d35400;
            font-weight: bold;
        }

        .grade-F {
            color: #c0392b;
            font-weight: bold;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow: auto;
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .close-btn:hover {
            color: #333;
        }

        .report-card {
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .student-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .subject-scores {
            width: 100%;
            margin-bottom: 20px;
        }

        .summary {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
        }

        .summary-item {
            text-align: center;
        }

        .summary-value {
            font-size: 24px;
            font-weight: bold;
        }

        .download-btn {
            display: block;
            margin: 20px auto 0;
            background-color: #27ae60;
        }

        .download-btn:hover {
            background-color: #219653;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .form-group {
                flex: 1 0 100%;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .search-box {
                max-width: 100%;
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .sort-options {
                flex-wrap: wrap;
            }
            
            .student-info {
                flex-direction: column;
            }
            
            .summary {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">ðŸ“Š Student Progress Report</div>
        </header>

        <h1>Student Progress Report System</h1>

        <!-- Add Student Form -->
        <div class="form-container">
            <h2>Add New Student</h2>
            <form id="student-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Student Name</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="class">Class</label>
                        <input type="text" id="class" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="math">Math Score</label>
                        <input type="number" id="math" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="science">Science Score</label>
                        <input type="number" id="science" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="english">English Score</label>
                        <input type="number" id="english" min="0" max="100" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="history">History Score</label>
                        <input type="number" id="history" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="geography">Geography Score</label>
                        <input type="number" id="geography" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <button type="submit">Add Student</button>
                    </div>
                </div>
            </form>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search by name or ID...">
            </div>
            <div class="sort-options">
                <button id="sort-name">Sort by Name</button>
                <button id="sort-class">Sort by Class</button>
                <button id="sort-score">Sort by Score</button>
            </div>
        </div>

        <!-- Students Table -->
        <div class="table-container">
            <h2>Student Records</h2>
            <table id="students-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Class</th>
                        <th>Math</th>
                        <th>Science</th>
                        <th>English</th>
                        <th>History</th>
                        <th>Geography</th>
                        <th>Total</th>
                        <th>Percentage</th>
                        <th>Grade</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="students-list">
                    <!-- Student data will be inserted here -->
                </tbody>
            </table>
        </div>

        <!-- Report Card Modal -->
        <div id="report-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h2>Student Report Card</h2>
                <div id="report-card" class="report-card">
                    <!-- Report card content will be inserted here -->
                </div>
                <button id="download-report" class="download-btn">Download Report</button>
            </div>
        </div>
    </div>

    <script>
        // Student data structure and initial sample data
        let students = JSON.parse(localStorage.getItem('students')) || [
            { id: 1, name: "Emma Johnson", class: "6A", math: 92, science: 88, english: 95, history: 90, geography: 87 },
            { id: 2, name: "Noah Smith", class: "7B", math: 78, science: 82, english: 75, history: 80, geography: 85 },
            { id: 3, name: "Olivia Davis", class: "8C", math: 65, science: 70, english: 68, history: 72, geography: 67 },
            { id: 4, name: "Liam Brown", class: "6B", math: 45, science: 52, english: 48, history: 55, geography: 50 },
            { id: 5, name: "Ava Wilson", class: "7A", math: 38, science: 42, english: 35, history: 40, geography: 32 }
        ];

        // Save students to localStorage
        function saveStudents() {
            localStorage.setItem('students', JSON.stringify(students));
        }

        // Calculate total marks for a student
        function calculateTotal(student) {
            return student.math + student.science + student.english + student.history + student.geography;
        }

        // Calculate percentage for a student
        function calculatePercentage(student) {
            return (calculateTotal(student) / 5).toFixed(2);
        }

        // Determine grade based on percentage
        function calculateGrade(percentage) {
            if (percentage >= 90) return "A";
            if (percentage >= 75) return "B";
            if (percentage >= 60) return "C";
            if (percentage >= 40) return "D";
            return "F";
        }

        // Get grade CSS class for styling
        function getGradeClass(grade) {
            return `grade-${grade}`;
        }

        // Render students table
        function renderStudentsTable(studentsArray = students) {
            const tbody = document.getElementById('students-list');
            tbody.innerHTML = '';
            
            studentsArray.forEach(student => {
                const total = calculateTotal(student);
                const percentage = calculatePercentage(student);
                const grade = calculateGrade(percentage);
                const gradeClass = getGradeClass(grade);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.id}</td>
                    <td><a href="#" class="view-report" data-id="${student.id}">${student.name}</a></td>
                    <td>${student.class}</td>
                    <td>${student.math}</td>
                    <td>${student.science}</td>
                    <td>${student.english}</td>
                    <td>${student.history}</td>
                    <td>${student.geography}</td>
                    <td>${total}</td>
                    <td>${percentage}%</td>
                    <td class="${gradeClass}">${grade}</td>
                    <td>
                        <button class="action-btn edit-btn" data-id="${student.id}">Edit</button>
                        <button class="action-btn delete-btn" data-id="${student.id}">Delete</button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
            
            // Add event listeners to view report links
            document.querySelectorAll('.view-report').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const studentId = parseInt(this.getAttribute('data-id'));
                    showReportCard(studentId);
                });
            });
            
            // Add event listeners to edit buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const studentId = parseInt(this.getAttribute('data-id'));
                    editStudent(studentId);
                });
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const studentId = parseInt(this.getAttribute('data-id'));
                    deleteStudent(studentId);
                });
            });
        }

        // Show report card in modal
        function showReportCard(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            const total = calculateTotal(student);
            const percentage = calculatePercentage(student);
            const grade = calculateGrade(percentage);
            const gradeClass = getGradeClass(grade);
            
            const reportCard = document.getElementById('report-card');
            reportCard.innerHTML = `
                <div class="student-info">
                    <div>
                        <h3>${student.name}</h3>
                        <p>Class: ${student.class}</p>
                        <p>Student ID: ${student.id}</p>
                    </div>
                </div>
                
                <table class="subject-scores">
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Mathematics</td>
                            <td>${student.math}</td>
                        </tr>
                        <tr>
                            <td>Science</td>
                            <td>${student.science}</td>
                        </tr>
                        <tr>
                            <td>English</td>
                            <td>${student.english}</td>
                        </tr>
                        <tr>
                            <td>History</td>
                            <td>${student.history}</td>
                        </tr>
                        <tr>
                            <td>Geography</td>
                            <td>${student.geography}</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="summary">
                    <div class="summary-item">
                        <div class="summary-label">Total Marks</div>
                        <div class="summary-value">${total}/500</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Percentage</div>
                        <div class="summary-value">${percentage}%</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Grade</div>
                        <div class="summary-value ${gradeClass}">${grade}</div>
                    </div>
                </div>
            `;
            
            // Show the modal
            document.getElementById('report-modal').style.display = 'block';
            
            // Set up download button
            document.getElementById('download-report').onclick = function() {
                window.print();
            };
        }

        // Add new student
        function addStudent(e) {
            e.preventDefault();
            
            // Get form values
            const name = document.getElementById('name').value;
            const studentClass = document.getElementById('class').value;
            const math = parseInt(document.getElementById('math').value);
            const science = parseInt(document.getElementById('science').value);
            const english = parseInt(document.getElementById('english').value);
            const history = parseInt(document.getElementById('history').value);
            const geography = parseInt(document.getElementById('geography').value);
            
            // Generate new ID
            const newId = students.length > 0 ? Math.max(...students.map(s => s.id)) + 1 : 1;
            
            // Create new student object
            const newStudent = {
                id: newId,
                name,
                class: studentClass,
                math,
                science,
                english,
                history,
                geography
            };
            
            // Add to students array
            students.push(newStudent);
            
            // Save and refresh
            saveStudents();
            renderStudentsTable();
            
            // Reset form
            document.getElementById('student-form').reset();
        }

        // Edit student
        function editStudent(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            // Pre-fill the form with student data
            document.getElementById('name').value = student.name;
            document.getElementById('class').value = student.class;
            document.getElementById('math').value = student.math;
            document.getElementById('science').value = student.science;
            document.getElementById('english').value = student.english;
            document.getElementById('history').value = student.history;
            document.getElementById('geography').value = student.geography;
            
            // Remove the student (will be re-added with updated info)
            deleteStudent(studentId, false);
            
            // Scroll to form
            document.querySelector('.form-container').scrollIntoView({ behavior: 'smooth' });
        }

        // Delete student
        function deleteStudent(studentId, confirmDelete = true) {
            if (confirmDelete && !confirm('Are you sure you want to delete this student record?')) {
                return;
            }
            
            students = students.filter(s => s.id !== studentId);
            saveStudents();
            renderStudentsTable();
        }

        // Search students
        function searchStudents() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            
            if (!searchTerm) {
                renderStudentsTable();
                return;
            }
            
            const filteredStudents = students.filter(student => 
                student.name.toLowerCase().includes(searchTerm) || 
                student.id.toString().includes(searchTerm)
            );
            
            renderStudentsTable(filteredStudents);
        }

        // Sort students
        function sortStudents(criteria) {
            const sortedStudents = [...students];
            
            switch(criteria) {
                case 'name':
                    sortedStudents.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'class':
                    sortedStudents.sort((a, b) => a.class.localeCompare(b.class));
                    break;
                case 'score':
                    sortedStudents.sort((a, b) => calculateTotal(b) - calculateTotal(a));
                    break;
            }
            
            renderStudentsTable(sortedStudents);
        }

        // Initialize the application
        function init() {
            // Render initial student table
            renderStudentsTable();
            
            // Add event listener to form
            document.getElementById('student-form').addEventListener('submit', addStudent);
            
            // Add event listener to search input
            document.getElementById('search-input').addEventListener('input', searchStudents);
            
            // Add event listeners to sort buttons
            document.getElementById('sort-name').addEventListener('click', () => sortStudents('name'));
            document.getElementById('sort-class').addEventListener('click', () => sortStudents('class'));
            document.getElementById('sort-score').addEventListener('click', () => sortStudents('score'));
            
            // Add event listener to close modal button
            document.querySelector('.close-btn').addEventListener('click', function() {
                document.getElementById('report-modal').style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === document.getElementById('report-modal')) {
                    document.getElementById('report-modal').style.display = 'none';
                }
            });
        }

        // Start the application when the DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>